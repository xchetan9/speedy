<!doctype html>
<html lang=en-US>

<head>
    <meta charset=utf-8>
    <title>Zpeed - Speedometer online</title>
    <meta http-equiv=X-UA-Compatible content="IE=edge">
    <meta name=description content="Check your real-time speed in km/h using GPS without any native app installation">
    <meta name=viewport content="width=device-width, initial-scale=1, maximum-scale=5.0, user-scalable=1">
    <link rel=canonical href="https://www.zpeed.in/">
    <link rel=manifest href=manifest.json>
    <meta name=mobile-web-app-capable content=yes>
    <meta name=apple-mobile-web-app-capable content=yes>
    <meta name=application-name content=Zpeed>
    <meta name=apple-mobile-web-app-status-bar-style content=black>
    <meta name=apple-mobile-web-app-title content=Zpeed>
    <link rel=icon sizes=192x192 href=/icon-192x192.png>
    <link rel=apple-touch-icon href=/icon-192x192.png>
    <meta name=msapplication-TileImage content=/images/touch/Zpeed_144.png>
    <meta name=msapplication-TileColor content=#3f51b5>
    <meta name=theme-color content=#3f51b5>
    <meta property=og:title content=Zpeed>
    <meta property=og:type content=website>
    <meta property=og:image content=https://zpeed.in/images/touch/Zpeed_192.png>
    <meta property=og:url content="https://zpeed.in/">
    <meta property=og:description
        content="Check your real-time speed in km/h. No installation needed. Use it right away!">
    <meta name=twitter:card content=summary>
    <meta name=twitter:url content="https://zpeed.in/">
    <meta name=twitter:title content=Zpeed>
    <meta name=twitter:description
        content="Check your real-time speed in km/h. No installation needed. Use it right away!">
    <meta name=twitter:image content=https://zpeed.in/images/touch/Zpeed_192.png>
    <meta name=twitter:creator content=@ktAsim>
    <link rel=stylesheet href=style.css>

</head>

<body><div id="main">
    </div>
<noscript><style type=text/css>
            .wrapper {display:none;}
        </style>
        <div class=noscriptmsg>You don't have JavaScript enabled. Without JS there's not much I can't do!.</div><link href="
                https://fonts.googleapis.com/css?family=Quicksand:300 " rel=stylesheet></noscript>
                <script>
                    // Get the search parameters from the URL
            const searchParams = new URLSearchParams(window.location.search);
            
            // Check if a parameter named 'page' exists
            if (searchParams.has('k')) {
                const id = searchParams.get('k');
                loadata(id);
            } else {
                loadDefaultPage();
            }
            function loadata(slug) {

        var inputs = JSON.parse(localStorage.getItem(slug)) || [];
        var maindiv = document.createElement("div")
        maindiv.setAttribute("class","od_div2")
        var inputList = document.createElement("ul")
        var h33 = document.createElement("h3")
        var empty = document.createElement("div")
        empty.setAttribute("id","emp")
        h33.innerHTML = `Record Details`
        maindiv.append(h33)
        inputList.innerHTML = "";
        inputs.forEach(function(item) {
            var li = document.createElement("li");
            li.textContent = item.s + " - " + item.t;
            inputList.appendChild(li);
        });
        maindiv.append(inputList)
                document.getElementById("main").append(maindiv)
                document.getElementById("main").append(empty)
                document.getElementById("emp").innerHTML = `<a href="/" class="button extrall">Back</a><button class="button extrall" onclick="deleteRec('${slug}')" style="color:red;">Delete Record</button>`
            }
            
            // Function to load the default page
            function loadDefaultPage() {
            document.getElementById("main").innerHTML = `
            <div class=wrapper id=sectionOne>
                    <h1>Zpeed</h1>
                    <strong id=speed>...</strong>
                    <p id=unit></p>
                    <div style=display:none>
                        <button class=button id=ms>Meter/Sec</button>
                        <button class=button id=mh>Miles/Hr</button>
                        <button class=button id=kh>KM/Hr</button>
                    </div>
                </div>
                <div class="wrapper wrapper-small">
                <button class="button extrall" onclick="toggleAutoInput()" id="startstop">Record</button>
                </div>
                <div class="">
                <ul id="inputList"></ul>
            </div>
                <div class="od_div">
                    <h3>Recent Records</h3>
                <ul id="olddatalist"></ul>
            </div>
                <div class="wrapper wrapper-small">
                    <div id=installer>
                        <button class=button>Add to Home screen</button>
                        <span class=tooltip></span>
                    </div>
                    <div id=info>
                        <p id=lat>Waiting for GPS...</p>
                        <p id=long>Make sure you are in GPS mode in location settings.</p>
                        <p id=error>Make sure you gave permissions to this website and the browser.</p>
                    </div>
                </div>
            `
            }
                </script>
                
<script src=/script.js></script>
<script>
                    var giftofspeed = document.createElement('link');
                    giftofspeed.rel = 'stylesheet';
                    giftofspeed.href = 'https://fonts.googleapis.com/css?family=Quicksand:300';
                    giftofspeed.type = 'text/css';
                    var godefer = document.getElementsByTagName('link')[0];
                    godefer.parentNode.insertBefore(giftofspeed, godefer);

                    if ('serviceWorker' in navigator) {
                        navigator.serviceWorker.register('/service-worker.js', { scope: '/' })
                            .then(function (registration) {
                                console.log('Service Worker Registered');
                            });

                        navigator.serviceWorker.ready.then(function (registration) {
                            console.log('Service Worker Ready');
                        });
                    }
                </script>
                                <script>
                                    function generateRandomSlug(length) {
                  const charset = "abcdefghijklmnopqrstuvwxyz0123456789";
                  let slug = "";
                  for (let i = 0; i < length; i++) {
                    const randomIndex = Math.floor(Math.random() * charset.length);
                    slug += charset[randomIndex];
                  }
                  return slug;
                }
                
                function deleteRec(key) {
    // Remove the item associated with the specified key
    localStorage.removeItem(key);
    
    // Redirect to the specified URL
    window.location.href = "/";
}                                </script>
<script>

var autoInputInterval;
    var autoInputActive = false;

    function toggleAutoInput() {
        if (autoInputActive) {
            document.getElementById("startstop").innerHTML= "Record"
            stopAutoInput();
            olddata();
            document.getElementById("inputList").innerHTML=""
        } else {
            document.getElementById("startstop").innerHTML= "Stop"

            startAutoInput();
        }
    }

    function startAutoInput() {
        var speed = document.getElementById("speed").innerHTML
        console.log(speed)
        autoInputActive = true;
        var slug = generateRandomSlug(10)
        console.log(slug)
        autoInputInterval = setInterval(function() {
            var input = speed
            var inputData = {
                s: input,
                t: new Date().toLocaleString()
            };
            var inputs = JSON.parse(localStorage.getItem(slug)) || [];
            inputs.push(inputData);
            localStorage.setItem(slug, JSON.stringify(inputs));
            displayInputs(slug);
        }, 1000);
        }

    function stopAutoInput() {
        autoInputActive = false;
        clearInterval(autoInputInterval);
        document.querySelector("button").textContent = "Start Auto Input";
    }

    function displayInputs(slug) {
        var inputs = JSON.parse(localStorage.getItem(slug)) || [];
        var inputList = document.getElementById("inputList");
        inputList.innerHTML = "";
        inputs.forEach(function(item) {
            var li = document.createElement("li");
            li.classList.add("inputItem");
            li.textContent = item.s + " - " + item.t;
            inputList.appendChild(li);
        });
    }
    function olddata() {
    if (typeof(Storage) !== "undefined") {
        var keys = Object.keys(localStorage);
        var sortedKeys = [];
        keys.forEach(function(key) {
            if (key !== "measure") {
                var value = localStorage.getItem(key);
                if (value) {
                    value = JSON.parse(value);
                    sortedKeys.push({ key: key, date: new Date(value[0].t) });
                }
            }
        });

        sortedKeys.sort(function(a, b) {
            return a.date - b.date;
        });
        console.log(sortedKeys)
        var olddatalist = document.getElementById("olddatalist");
        olddatalist.innerHTML = ``;
        sortedKeys.forEach(function(item) {
            var li = document.createElement("li");
            li.classList.add("inputItem");
            li.textContent =item.date.toLocaleString();
            li.innerHTML =`<a href="/?k=${item.key}">${item.date.toLocaleString()}</a>`
            olddatalist.appendChild(li);
        });
    } else {
        console.log("Use Latest Version of Browsers");
    }
}

    displayInputs();
    olddata();
</script>


            
            
            </body></html>